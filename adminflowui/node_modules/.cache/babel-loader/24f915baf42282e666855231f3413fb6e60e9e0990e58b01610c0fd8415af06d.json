{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-ef68022e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"login\"\n};\nconst _hoisted_2 = {\n  id: \"login-box\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"welcome\"\n}, \"Welcome\", -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  style: {\n    \"font-size\": \"15px\",\n    \"font-weight\": \"700\",\n    \"color\": \"#fff\"\n  }\n}, \" 记住密码\", -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createVNode(_component_el_form, null, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        \"prefix-icon\": \"Avatar\",\n        type: \"text\",\n        modelValue: $data.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.username = $event),\n        placeholder: \"username\",\n        size: \"small\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        \"prefix-icon\": \"Avatar\",\n        type: \"password\",\n        modelValue: $data.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event),\n        placeholder: \"password\",\n        size: \"small\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_checkbox, {\n        id: \"check\",\n        modelValue: $data.remember,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.remember = $event)\n      }, {\n        default: _withCtx(() => [_hoisted_4]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_button, {\n    onClick: $options.login\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Login\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])])]);\n}","map":{"version":3,"names":["class","id","_createElementVNode","style","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_el_form","_component_el_form_item","_component_el_input","type","$data","username","$event","placeholder","size","password","_component_el_checkbox","remember","_hoisted_4","_component_el_button","onClick","$options","login"],"sources":["D:\\everything\\项目\\adminflow\\src\\components\\Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <div id=\"login-box\">\r\n      <h1 class=\"welcome\">Welcome</h1>\r\n      <el-form>\r\n        <el-form-item>\r\n          <el-input prefix-icon=\"Avatar\" type=\"text\" v-model=\"username\" placeholder=\"username\" size=\"small\"/>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-input prefix-icon=\"Avatar\" type=\"password\" v-model=\"password\" placeholder=\"password\" size=\"small\"/>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-checkbox id=\"check\" v-model=\"remember\"><p style=\"font-size: 15px;font-weight: 700;color: #fff;\">\r\n            记住密码</p></el-checkbox>\r\n        </el-form-item>\r\n      </el-form>\r\n      <el-button @click=\"login\">Login</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {addRoutes} from \"@/util/routeUtils\";\r\nimport router from \"@/router\";\r\nimport request from \"@/util/requestUtil\";\r\nimport {ElMessage} from 'element-plus';\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: 'Login',\r\n  data() {\r\n    return {\r\n      username: null,\r\n      password: null,\r\n      remember: false\r\n    }\r\n  },\r\n  methods: {\r\n    login() {\r\n      if (this.username != null && this.password != null) {\r\n        let rem = this.remember.toString();\r\n        request.login(this.username, this.password, rem).then(resp => {\r\n          if (resp.data.message === \"登录成功\") {\r\n            sessionStorage.setItem(\"user\", JSON.stringify(resp.data.u));\r\n            let user=JSON.parse(sessionStorage.getItem(\"user\"));\r\n            request.initMenu(user.id).then(resp => {\r\n              //固定调用 mutations里面的getMenu\r\n              store.commit(\"getMenu\", resp.data);\r\n              addRoutes(resp.data);\r\n            })\r\n            router.push(\"/home\");\r\n          } else {\r\n            ElMessage.error(resp.data.message);\r\n          }\r\n        })\r\n      }else {\r\n        ElMessage.error(\"用户名或密码不能为空\")\r\n      }\r\n    },\r\n    // 获取cookie\r\n    getCookieValue(cookie) {\r\n      //  按冒号分割cookie;\r\n      let cookies = document.cookie.split(\";\");\r\n      for (let i = 0; i < cookies.length; i++) {\r\n        let strings = cookies[i].trim().split(\"=\");\r\n        if (strings[0] === cookie) {\r\n          return strings[1];\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    let c1 = this.getCookieValue(\"username\");\r\n    let c2 = this.getCookieValue(\"password\");\r\n    if (c1 !== null && c2 !== null) {\r\n      this.username = c1;\r\n      this.password = c2;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.login {\r\n  margin-top: 0;\r\n  padding: 0;\r\n  background-image: url(\"@/assets/background.jpg\");\r\n  background-size: cover;\r\n  display: flex; /* 将div1设置为Flex容器 */\r\n  justify-content: center; /* 水平居中 */\r\n  align-items: center; /* 垂直居中 */\r\n}\r\n\r\n.welcome {\r\n  animation: rainbow 10s infinite;\r\n}\r\n\r\n@keyframes rainbow {\r\n  10% {\r\n    color: red\r\n  }\r\n  14% {\r\n    color: orange\r\n  }\r\n  28% {\r\n    color: yellow\r\n  }\r\n  42% {\r\n    color: green\r\n  }\r\n  57% {\r\n    color: blue\r\n  }\r\n  71% {\r\n    color: indigo\r\n  }\r\n  85% {\r\n    color: violet\r\n  }\r\n  100% {\r\n    color: red\r\n  }\r\n}\r\n\r\n#login-box {\r\n  width: 25%;\r\n  height: auto;\r\n  margin: 10%;\r\n  /*margin: 0 auto;*/\r\n  /*margin-top: 13%;*/\r\n  text-align: center;\r\n  padding: 20px 50px;\r\n}\r\n\r\n#login-box h1 {\r\n  color: #fff;\r\n}\r\n\r\n#check {\r\n}\r\n\r\n#login-box button {\r\n  margin-top: 15px;\r\n  width: 190px;\r\n  height: 30px;\r\n  font-size: 20px;\r\n  font-weight: 700;\r\n  color: #fff;\r\n  background-image: linear-gradient(to right, #74ebd5 0%, #9face6 100%);\r\n  border: 0;\r\n  border-radius: 15px;\r\n}\r\n\r\n</style>"],"mappings":";;;EACOA,KAAK,EAAC;AAAO;;EACXC,EAAE,EAAC;AAAW;gEACjBC,mBAAA,CAAgC;EAA5BF,KAAK,EAAC;AAAS,GAAC,SAAO;gEASoBE,mBAAA,CACjC;EADoCC,KAAqD,EAArD;IAAA;IAAA;IAAA;EAAA;AAAqD,GAAC,OAC9F;;;;;;;;uBAZdC,mBAAA,CAiBM,OAjBNC,UAiBM,GAhBJH,mBAAA,CAeM,OAfNI,UAeM,GAdJC,UAAgC,EAChCC,YAAA,CAWUC,kBAAA;sBAVR,MAEe,CAFfD,YAAA,CAEeE,uBAAA;wBADb,MAAmG,CAAnGF,YAAA,CAAmGG,mBAAA;QAAzF,aAAW,EAAC,QAAQ;QAACC,IAAI,EAAC,MAAM;oBAAUC,KAAA,CAAAC,QAAQ;mEAARD,KAAA,CAAAC,QAAQ,GAAAC,MAAA;QAAEC,WAAW,EAAC,UAAU;QAACC,IAAI,EAAC;;;QAE5FT,YAAA,CAEeE,uBAAA;wBADb,MAAuG,CAAvGF,YAAA,CAAuGG,mBAAA;QAA7F,aAAW,EAAC,QAAQ;QAACC,IAAI,EAAC,UAAU;oBAAUC,KAAA,CAAAK,QAAQ;mEAARL,KAAA,CAAAK,QAAQ,GAAAH,MAAA;QAAEC,WAAW,EAAC,UAAU;QAACC,IAAI,EAAC;;;QAEhGT,YAAA,CAGeE,uBAAA;wBAFb,MACwB,CADxBF,YAAA,CACwBW,sBAAA;QADXlB,EAAE,EAAC,OAAO;oBAAUY,KAAA,CAAAO,QAAQ;mEAARP,KAAA,CAAAO,QAAQ,GAAAL,MAAA;;0BAAE,MACjC,CADiCM,UACjC,C;;;;;;;MAGdb,YAAA,CAA2Cc,oBAAA;IAA/BC,OAAK,EAAEC,QAAA,CAAAC;EAAK;sBAAE,MAAK,C,iBAAL,OAAK,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}