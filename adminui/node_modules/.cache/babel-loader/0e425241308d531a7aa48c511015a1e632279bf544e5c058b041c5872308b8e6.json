{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport request from \"@/util/requestUtil\";\nimport { ElMessage } from 'element-plus';\nimport store from \"@/store\";\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      username: null,\n      password: null,\n      remember: false,\n      activeName: 'first'\n    };\n  },\n  methods: {\n    login() {\n      if (this.username != null && this.password != null) {\n        let rem = this.remember.toString();\n        request.login(this.username, this.password, rem).then(resp => {\n          if (resp.data.code === 200) {\n            let token = this.getCookieValue(this.username + 'token');\n            // 将token存入到store\n            store.commit('getToken', token);\n            // 获取当前用户信息\n            let user = JSON.stringify(resp.data.user);\n            sessionStorage.setItem(\"user\", user);\n            this.$router.push('/home');\n          } else {\n            ElMessage.error(resp.data.message);\n          }\n        });\n      } else {\n        ElMessage.error(\"用户名或密码不能为空\");\n      }\n    },\n    // 获取cookie\n    getCookieValue(cookie) {\n      //  按冒号分割cookie;\n      let cookies = document.cookie.split(\";\");\n      for (let i = 0; i < cookies.length; i++) {\n        let strings = cookies[i].trim().split(\"=\");\n        if (strings[0] === cookie) {\n          return strings[1];\n        }\n      }\n    },\n    // 生成验证码\n    generateCode() {\n      const canvas = this.$refs.canvas;\n      console.log(canvas);\n      const context = canvas.getContext('2d');\n      const width = canvas.width;\n      const height = canvas.height;\n      // 生成随机验证码\n      const code = this.generateRandomCode();\n      console.log(code);\n      // 绘制验证码\n      context.clearRect(0, 0, width, height);\n      context.font = '24px Arial';\n      context.fillStyle = 'black';\n      context.fillText(code, 10, 30);\n    },\n    generateRandomCode() {\n      // 随机生成一个四位数验证码\n      const codeLength = 4;\n      let code = '';\n      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n      for (let i = 0; i < codeLength; i++) {\n        const randomIndex = Math.floor(Math.random() * characters.length);\n        code += characters.charAt(randomIndex);\n      }\n      return code;\n    }\n  },\n  mounted() {\n    this.generateCode();\n    let c1 = this.getCookieValue(\"username\");\n    let c2 = this.getCookieValue(\"password\");\n    if (c1 !== null && c2 !== null) {\n      this.username = c1;\n      this.password = c2;\n    }\n  }\n};","map":{"version":3,"names":["request","ElMessage","store","name","data","username","password","remember","activeName","methods","login","rem","toString","then","resp","code","token","getCookieValue","commit","user","JSON","stringify","sessionStorage","setItem","$router","push","error","message","cookie","cookies","document","split","i","length","strings","trim","generateCode","canvas","$refs","console","log","context","getContext","width","height","generateRandomCode","clearRect","font","fillStyle","fillText","codeLength","characters","randomIndex","Math","floor","random","charAt","mounted","c1","c2"],"sources":["/Users/pt/Documents/code/adminflowui/src/components/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login\">\n    <div id=\"login-box\">\n      <div class=\"left-div\"></div>\n      <div class=\"right-div\">\n        <h1 class=\"welcome\">Welcome</h1>\n        <el-tabs v-model=\"activeName\">\n          <el-tab-pane label=\"用户名登录\" name=\"first\">\n            <el-form>\n              <el-form-item>\n                <el-input prefix-icon=\"Avatar\" type=\"text\" v-model=\"username\" placeholder=\"username\"/>\n              </el-form-item>\n              <el-form-item>\n                <el-input prefix-icon=\"Lock\" type=\"password\" v-model=\"password\" placeholder=\"password\"/>\n              </el-form-item>\n              <el-form-item style=\"display: flex;justify-content: space-around\">\n                <el-input style=\"width: 50%;\" type=\"text\" placeholder=\"请输入验证码\"/>\n                <div>\n                  <canvas style=\"height: 40%;width: 100%\" ref=\"canvas\"></canvas>\n                </div>\n              </el-form-item>\n              <el-form-item>\n                <el-checkbox id=\"check\" v-model=\"remember\"><p style=\"font-size: 15px;font-weight: 700\">\n                  记住我</p></el-checkbox>\n              </el-form-item>\n            </el-form>\n          </el-tab-pane>\n          <el-tab-pane label=\"验证码登录\" name=\"two\">\n            <el-form>\n              <el-form-item>\n                <el-input prefix-icon=\"Avatar\" type=\"text\" v-model=\"phoneNumber\" placeholder=\"请输入手机号\"/>\n              </el-form-item>\n              <el-form-item>\n                <el-input prefix-icon=\"ChatLineRound\" type=\"password\" v-model=\"password\" placeholder=\"请输入验证码\"/>\n              </el-form-item>\n              <el-form-item>\n                <el-checkbox id=\"check\" v-model=\"remember\"><p style=\"font-size: 15px;font-weight: 700\">\n                  记住我</p></el-checkbox>\n              </el-form-item>\n            </el-form>\n          </el-tab-pane>\n        </el-tabs>\n        <el-button @click=\"login\">Login</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport request from \"@/util/requestUtil\";\nimport {ElMessage} from 'element-plus';\nimport store from \"@/store\";\n\n\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      username: null,\n      password: null,\n      remember: false,\n      activeName: 'first'\n    }\n  },\n  methods: {\n    login() {\n      if (this.username != null && this.password != null) {\n        let rem = this.remember.toString();\n        request.login(this.username, this.password, rem).then(resp => {\n          if (resp.data.code === 200) {\n            let token = this.getCookieValue(this.username + 'token');\n            // 将token存入到store\n            store.commit('getToken', token);\n            // 获取当前用户信息\n            let user = JSON.stringify(resp.data.user);\n            sessionStorage.setItem(\"user\", user);\n            this.$router.push('/home');\n          } else {\n            ElMessage.error(resp.data.message);\n          }\n        })\n      } else {\n        ElMessage.error(\"用户名或密码不能为空\");\n      }\n    }\n    ,\n    // 获取cookie\n    getCookieValue(cookie) {\n      //  按冒号分割cookie;\n      let cookies = document.cookie.split(\";\");\n      for (let i = 0; i < cookies.length; i++) {\n        let strings = cookies[i].trim().split(\"=\");\n        if (strings[0] === cookie) {\n          return strings[1];\n        }\n      }\n    },\n    // 生成验证码\n    generateCode() {\n      const canvas = this.$refs.canvas;\n      console.log(canvas);\n      const context = canvas.getContext('2d');\n      const width = canvas.width;\n      const height = canvas.height;\n      // 生成随机验证码\n      const code = this.generateRandomCode();\n      console.log(code);\n      // 绘制验证码\n      context.clearRect(0, 0, width, height);\n      context.font = '24px Arial';\n      context.fillStyle = 'black';\n      context.fillText(code, 10, 30);\n    },\n    generateRandomCode() {\n      // 随机生成一个四位数验证码\n      const codeLength = 4;\n      let code = '';\n      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n      for (let i = 0; i < codeLength; i++) {\n        const randomIndex = Math.floor(Math.random() * characters.length);\n        code += characters.charAt(randomIndex);\n      }\n      return code;\n    },\n  }\n  ,\n  mounted() {\n    this.generateCode();\n    let c1 = this.getCookieValue(\"username\");\n    let c2 = this.getCookieValue(\"password\");\n    if (c1 !== null && c2 !== null) {\n      this.username = c1;\n      this.password = c2;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login {\n  margin-top: 0;\n  padding: 0;\n  background-size: cover;\n  display: flex; /* 将div1设置为Flex容器 */\n  justify-content: center; /* 水平居中 */\n  align-items: center; /* 垂直居中 */\n}\n\n.welcome {\n  animation: rainbow 10s infinite;\n}\n\n.left-div {\n  float: left;\n  width: 50%;\n  padding: 10px;\n}\n\n.right-div {\n  float: right;\n  width: 50%;\n  padding: 10px;\n}\n\n@keyframes rainbow {\n  10% {\n    color: red\n  }\n  14% {\n    color: orange\n  }\n  28% {\n    color: yellow\n  }\n  42% {\n    color: green\n  }\n  57% {\n    color: blue\n  }\n  71% {\n    color: indigo\n  }\n  85% {\n    color: violet\n  }\n  100% {\n    color: red\n  }\n}\n\n\n#login-box {\n  width: 50%;\n  height: auto;\n  margin: 10%;\n  background-color: #f2f2f2;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  /*margin: 0 auto;*/\n  /*margin-top: 13%;*/\n  padding: 20px 50px;\n}\n\n#login-box h1 {\n  color: #fff;\n}\n\n\n#login-box button {\n  margin-top: 15px;\n  width: 100%;\n  height: 30px;\n  font-size: 20px;\n  font-weight: 700;\n  color: #fff;\n  background-image: linear-gradient(to right, #74ebd5 0%, #9face6 100%);\n  border: 0;\n  border-radius: 15px;\n}\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}