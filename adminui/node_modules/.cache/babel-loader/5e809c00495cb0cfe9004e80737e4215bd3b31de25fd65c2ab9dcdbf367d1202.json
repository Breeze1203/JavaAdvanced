{"ast":null,"code":"import request from \"@/util/requestUtil\";\nexport default {\n  name: 'RoleSet',\n  data() {\n    return {\n      roles: [],\n      // 所有角色数组\n      Permissions: [],\n      //所有权限数组\n      check: [],\n      //复选框选中的值\n      activeNames: -1\n    };\n  },\n  methods: {\n    isChecked(permission) {\n      this.check = [];\n      request.getPermissionByRole(item.id).then(resp => {\n        if (resp.data != null) {\n          this.check = resp.data;\n          this.$forceUpdate();\n        }\n      });\n      return this.check.includes(permission);\n    },\n    // 切换手风琴时\n    changeItem(item) {\n      this.check = [];\n      request.getPermissionByRole(item.id).then(resp => {\n        if (resp.data != null) {\n          this.check = resp.data;\n          this.$forceUpdate();\n        }\n      });\n    },\n    // 获取所有角色\n    getAllRoles() {\n      request.getAllRoles().then(resp => {\n        if (resp.data != null) {\n          this.roles = resp.data;\n        }\n      });\n    },\n    // 编辑角色\n    updateRole(data) {\n      console.log(data);\n    },\n    // 删除角色\n    DeleteRole(data) {\n      console.log(data);\n    },\n    // 获取所有权限\n    initAllPermission() {\n      request.getAllPermission().then(resp => {\n        if (resp.data != null) {\n          this.Permissions = resp.data;\n        }\n      });\n    },\n    // 修改权限\n    updatePermission() {\n      console.log(this.checked);\n    }\n  },\n  mounted() {\n    this.getAllRoles();\n    this.initAllPermission();\n  }\n};","map":{"version":3,"names":["request","name","data","roles","Permissions","check","activeNames","methods","isChecked","permission","getPermissionByRole","item","id","then","resp","$forceUpdate","includes","changeItem","getAllRoles","updateRole","console","log","DeleteRole","initAllPermission","getAllPermission","updatePermission","checked","mounted"],"sources":["/Users/pt/Documents/code/adminflowui/src/components/set/RoleSet.vue"],"sourcesContent":["<template>\n  <div class=\"common-layout\" style=\"margin-top: 25px\">\n    <el-container class=\"shadow-box\">\n      <el-aside width=\"200px\">\n        <div style=\"border-bottom: 1px solid;text-align: center\">\n          <h4>角色管理</h4>\n        </div>\n        <div class=\"tag-container\" v-for=\"(item,index) in roles\" :key=\"index\">\n          <el-tag size=\"large\" class=\"custom-tag\">{{ item.nameZh }}\n            <el-dropdown size=\"small\" trigger=\"hover\">\n              <el-icon>\n                <Setting/>\n              </el-icon>\n              <template #dropdown>\n                <el-dropdown-menu>\n                  <el-dropdown-item @click=\"updateRole(item)\">编辑</el-dropdown-item>\n                  <el-dropdown-item @click=\"DeleteRole(index)\">删除</el-dropdown-item>\n                </el-dropdown-menu>\n              </template>\n            </el-dropdown>\n          </el-tag>\n        </div>\n      </el-aside>\n      <el-container>\n        <el-header>\n          <div class=\"container\">\n            <el-input placeholder=\"请输入角色英文\" style=\"width: 200px\" type=\"text\">\n              <template #prepend>role_</template>\n            </el-input>\n            <el-input placeholder=\"请输入角色中文名称\" style=\"width: 200px;margin-left: 20px\" type=\"text\">\n            </el-input>\n            <el-button style=\"margin-left: 20px\" type=\"primary\">添加角色\n              <el-icon>\n                <Plus/>\n              </el-icon>\n            </el-button>\n          </div>\n        </el-header>\n        <el-main>\n          <div>\n            <el-collapse accordion v-model=\"activeNames\" v-for=\"(item,index) in roles\" :key=\"index\">\n              <el-collapse-item :title=\"item.nameZh\" @click=\"changeItem(item)\">\n                <span>权限设置</span>\n                <el-checkbox-group v-for=\"(permission,index) in Permissions\">\n                  <el-checkbox :label=\"permission.describe\" :key=\"index\"\n                               :checked=\"isChecked(permission.describe)\"\n                               @change=\"handleCheckboxChange(permission.describe)\"/>\n                </el-checkbox-group>\n                <div style=\"display: flex;justify-content: end\">\n                  <el-button size=\"small\" type=\"default\">取消</el-button>\n                  <el-button size=\"small\" type=\"primary\" @click=\"updatePermission\">保存</el-button>\n                </div>\n              </el-collapse-item>\n            </el-collapse>\n          </div>\n        </el-main>\n      </el-container>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport request from \"@/util/requestUtil\";\n\nexport default {\n  name: 'RoleSet',\n  data() {\n    return {\n      roles: [], // 所有角色数组\n      Permissions: [], //所有权限数组\n      check: [],//复选框选中的值\n      activeNames: -1\n    }\n  },\n  methods: {\n    isChecked(permission) {\n      this.check = [];\n      request.getPermissionByRole(item.id).then(resp => {\n        if (resp.data != null) {\n          this.check = resp.data;\n          this.$forceUpdate();\n        }\n      })\n      return this.check.includes(permission);\n    },\n    // 切换手风琴时\n    changeItem(item) {\n      this.check = [];\n      request.getPermissionByRole(item.id).then(resp => {\n        if (resp.data != null) {\n          this.check = resp.data;\n          this.$forceUpdate();\n        }\n      })\n    },\n    // 获取所有角色\n    getAllRoles() {\n      request.getAllRoles().then(resp => {\n        if (resp.data != null) {\n          this.roles = resp.data;\n        }\n      })\n    },\n    // 编辑角色\n    updateRole(data) {\n      console.log(data);\n    },\n    // 删除角色\n    DeleteRole(data) {\n      console.log(data);\n    },\n    // 获取所有权限\n    initAllPermission() {\n      request.getAllPermission().then(resp => {\n        if (resp.data != null) {\n          this.Permissions = resp.data;\n        }\n\n      })\n    },\n    // 修改权限\n    updatePermission() {\n      console.log(this.checked);\n    }\n  },\n  mounted() {\n    this.getAllRoles();\n    this.initAllPermission();\n  }\n}\n\n</script>\n\n<style scoped>\n.shadow-box {\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4); /* 设置阴影效果 */\n  border: 1px solid #ccc; /* 设置边框 */\n  padding: 20px; /* 设置内边距，可根据需要进行调整 */\n}\n\n.tag-container {\n  display: flex;\n  flex-direction: column;\n}\n\n.custom-tag {\n  border: none;\n  background-color: #ffffff; /* 修改为你想要的颜色值 */\n  font-size: 14px; /* 修改为你想要的字体大小 */\n  color: black;\n  text-align: left;\n}\n\n.container {\n  display: flex;\n}\n\n</style>"],"mappings":"AA8DA,OAAOA,OAAM,MAAO,oBAAoB;AAExC,eAAe;EACbC,IAAI,EAAE,SAAS;EACfC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MAAE;MACXC,WAAW,EAAE,EAAE;MAAE;MACjBC,KAAK,EAAE,EAAE;MAAC;MACVC,WAAW,EAAE,CAAC;IAChB;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,SAASA,CAACC,UAAU,EAAE;MACpB,IAAI,CAACJ,KAAI,GAAI,EAAE;MACfL,OAAO,CAACU,mBAAmB,CAACC,IAAI,CAACC,EAAE,CAAC,CAACC,IAAI,CAACC,IAAG,IAAK;QAChD,IAAIA,IAAI,CAACZ,IAAG,IAAK,IAAI,EAAE;UACrB,IAAI,CAACG,KAAI,GAAIS,IAAI,CAACZ,IAAI;UACtB,IAAI,CAACa,YAAY,CAAC,CAAC;QACrB;MACF,CAAC;MACD,OAAO,IAAI,CAACV,KAAK,CAACW,QAAQ,CAACP,UAAU,CAAC;IACxC,CAAC;IACD;IACAQ,UAAUA,CAACN,IAAI,EAAE;MACf,IAAI,CAACN,KAAI,GAAI,EAAE;MACfL,OAAO,CAACU,mBAAmB,CAACC,IAAI,CAACC,EAAE,CAAC,CAACC,IAAI,CAACC,IAAG,IAAK;QAChD,IAAIA,IAAI,CAACZ,IAAG,IAAK,IAAI,EAAE;UACrB,IAAI,CAACG,KAAI,GAAIS,IAAI,CAACZ,IAAI;UACtB,IAAI,CAACa,YAAY,CAAC,CAAC;QACrB;MACF,CAAC;IACH,CAAC;IACD;IACAG,WAAWA,CAAA,EAAG;MACZlB,OAAO,CAACkB,WAAW,CAAC,CAAC,CAACL,IAAI,CAACC,IAAG,IAAK;QACjC,IAAIA,IAAI,CAACZ,IAAG,IAAK,IAAI,EAAE;UACrB,IAAI,CAACC,KAAI,GAAIW,IAAI,CAACZ,IAAI;QACxB;MACF,CAAC;IACH,CAAC;IACD;IACAiB,UAAUA,CAACjB,IAAI,EAAE;MACfkB,OAAO,CAACC,GAAG,CAACnB,IAAI,CAAC;IACnB,CAAC;IACD;IACAoB,UAAUA,CAACpB,IAAI,EAAE;MACfkB,OAAO,CAACC,GAAG,CAACnB,IAAI,CAAC;IACnB,CAAC;IACD;IACAqB,iBAAiBA,CAAA,EAAG;MAClBvB,OAAO,CAACwB,gBAAgB,CAAC,CAAC,CAACX,IAAI,CAACC,IAAG,IAAK;QACtC,IAAIA,IAAI,CAACZ,IAAG,IAAK,IAAI,EAAE;UACrB,IAAI,CAACE,WAAU,GAAIU,IAAI,CAACZ,IAAI;QAC9B;MAEF,CAAC;IACH,CAAC;IACD;IACAuB,gBAAgBA,CAAA,EAAG;MACjBL,OAAO,CAACC,GAAG,CAAC,IAAI,CAACK,OAAO,CAAC;IAC3B;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACT,WAAW,CAAC,CAAC;IAClB,IAAI,CAACK,iBAAiB,CAAC,CAAC;EAC1B;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}