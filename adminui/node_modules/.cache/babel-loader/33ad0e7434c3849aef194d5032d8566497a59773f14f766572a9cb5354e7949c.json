{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-ef68022e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"login\"\n};\nconst _hoisted_2 = {\n  id: \"login-box\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"left-div\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"right-div\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"welcome\"\n}, \"AdminFlow\", -1 /* HOISTED */));\nconst _hoisted_6 = {\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"space-between\",\n    \"height\": \"30px\"\n  }\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  style: {\n    \"font-size\": \"15px\",\n    \"font-weight\": \"700\"\n  }\n}, \" 记住我\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"space-between\",\n    \"height\": \"30px\"\n  }\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  style: {\n    \"font-size\": \"15px\",\n    \"font-weight\": \"700\"\n  }\n}, \" 记住我\", -1 /* HOISTED */));\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  style: {\n    \"text-align\": \"center\",\n    \"padding-top\": \"10px\"\n  }\n}, \"cs\", -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_tab_pane = _resolveComponent(\"el-tab-pane\");\n  const _component_el_tabs = _resolveComponent(\"el-tabs\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _createVNode(_component_el_tabs, {\n    modelValue: $data.activeName,\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.activeName = $event)\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_tab_pane, {\n      label: \"用户名登录\",\n      name: \"first\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form, null, {\n        default: _withCtx(() => [_createVNode(_component_el_form_item, {\n          size: \"default\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            \"prefix-icon\": \"Avatar\",\n            type: \"text\",\n            modelValue: $data.username,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.username = $event),\n            placeholder: \"username\"\n          }, null, 8 /* PROPS */, [\"modelValue\"])]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_form_item, {\n          size: \"default\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            \"prefix-icon\": \"Lock\",\n            type: \"password\",\n            \"show-password\": true,\n            modelValue: $data.password,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event),\n            placeholder: \"password\"\n          }, null, 8 /* PROPS */, [\"modelValue\"])]),\n          _: 1 /* STABLE */\n        }), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_input, {\n          modelValue: $data.Verification,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.Verification = $event),\n          type: \"text\",\n          placeholder: \"请输入验证码\"\n        }, null, 8 /* PROPS */, [\"modelValue\"]), _createElementVNode(\"canvas\", {\n          onClick: _cache[3] || (_cache[3] = (...args) => $options.generateCode && $options.generateCode(...args)),\n          ref: \"canvas\",\n          style: {\n            \"height\": \"100%\",\n            \"width\": \"100%\"\n          }\n        }, null, 512 /* NEED_PATCH */)]), _createVNode(_component_el_form_item, {\n          size: \"default\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_checkbox, {\n            id: \"check\",\n            modelValue: $data.remember,\n            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.remember = $event)\n          }, {\n            default: _withCtx(() => [_hoisted_7]),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"modelValue\"])]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_button, {\n        onClick: $options.loginByName,\n        class: \"loginButton\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"Login\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_tab_pane, {\n      label: \"手机号登录\",\n      name: \"two\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form, null, {\n        default: _withCtx(() => [_createVNode(_component_el_form_item, null, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            \"prefix-icon\": \"Avatar\",\n            type: \"text\",\n            modelValue: $data.phoneNumber,\n            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.phoneNumber = $event),\n            placeholder: \"请输入手机号\"\n          }, null, 8 /* PROPS */, [\"modelValue\"])]),\n          _: 1 /* STABLE */\n        }), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_input, {\n          \"prefix-icon\": \"Cellphone\",\n          modelValue: $data.verification,\n          \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.verification = $event),\n          type: \"text\",\n          placeholder: \"请输入验证码\"\n        }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_button, {\n          style: {\n            \"width\": \"140px\",\n            \"border\": \"none\"\n          }\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"获取验证码\")]),\n          _: 1 /* STABLE */\n        })]), _createVNode(_component_el_form_item, null, {\n          default: _withCtx(() => [_createVNode(_component_el_checkbox, {\n            id: \"check\",\n            modelValue: $data.rememberWithPhone,\n            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.rememberWithPhone = $event)\n          }, {\n            default: _withCtx(() => [_hoisted_9]),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"modelValue\"])]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_button, {\n        onClick: $options.loginByPhone,\n        class: \"loginButton\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"Login\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])])]), _hoisted_10]);\n}","map":{"version":3,"names":["class","id","_createElementVNode","style","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createVNode","_component_el_tabs","$data","activeName","$event","_component_el_tab_pane","label","name","_component_el_form","_component_el_form_item","size","_component_el_input","type","username","placeholder","password","_hoisted_6","Verification","onClick","_cache","args","$options","generateCode","ref","_component_el_checkbox","remember","_hoisted_7","_component_el_button","loginByName","phoneNumber","_hoisted_8","verification","rememberWithPhone","_hoisted_9","loginByPhone","_hoisted_10"],"sources":["/Users/pt/Documents/code/adminflowui/src/components/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login\">\n    <div id=\"login-box\">\n      <div class=\"left-div\">\n      </div>\n      <div class=\"right-div\">\n        <h1 class=\"welcome\">AdminFlow</h1>\n        <el-tabs v-model=\"activeName\">\n          <el-tab-pane label=\"用户名登录\" name=\"first\">\n            <el-form>\n              <el-form-item size=\"default\">\n                <el-input prefix-icon=\"Avatar\" type=\"text\" v-model=\"username\" placeholder=\"username\"/>\n              </el-form-item>\n              <el-form-item size=\"default\">\n                <el-input prefix-icon=\"Lock\" type=\"password\" :show-password=\"true\" v-model=\"password\" placeholder=\"password\">\n                </el-input>\n              </el-form-item>\n              <div style=\"display: flex; justify-content: space-between;height: 30px\">\n                <el-input v-model=\"Verification\" type=\"text\" placeholder=\"请输入验证码\">\n                </el-input>\n                <canvas @click=\"generateCode\" ref=\"canvas\" style=\"height: 100%;width: 100%;\"></canvas>\n              </div>\n              <el-form-item size=\"default\">\n                <el-checkbox id=\"check\" v-model=\"remember\"><p style=\"font-size: 15px;font-weight: 700\">\n                  记住我</p></el-checkbox>\n              </el-form-item>\n            </el-form>\n            <el-button @click=\"loginByName\" class=\"loginButton\">Login</el-button>\n          </el-tab-pane>\n          <el-tab-pane label=\"手机号登录\" name=\"two\">\n            <el-form>\n              <el-form-item>\n                <el-input prefix-icon=\"Avatar\" type=\"text\" v-model=\"phoneNumber\" placeholder=\"请输入手机号\"/>\n              </el-form-item>\n              <div style=\"display: flex; justify-content: space-between;height: 30px\">\n                <el-input prefix-icon=\"Cellphone\" v-model=\"verification\" type=\"text\" placeholder=\"请输入验证码\"/>\n                <el-button style=\"width: 140px;border: none\">获取验证码</el-button>\n              </div>\n              <el-form-item>\n                <el-checkbox id=\"check\" v-model=\"rememberWithPhone\"><p style=\"font-size: 15px;font-weight: 700\">\n                  记住我</p></el-checkbox>\n              </el-form-item>\n            </el-form>\n            <el-button @click=\"loginByPhone\" class=\"loginButton\">Login</el-button>\n          </el-tab-pane>\n        </el-tabs>\n      </div>\n    </div>\n    <p style=\"text-align: center;padding-top: 10px\">cs</p>\n  </div>\n</template>\n\n<script>\nimport request from \"@/util/requestUtil\";\nimport {ElMessage} from 'element-plus';\nimport store from \"@/store\";\n\n\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      username: null,\n      password: null,\n      remember: false,\n      activeName: 'first',\n      Verification: null,//验证码表单\n      code: null,\n      verification:null,\n      rememberWithPhone:false,//验证码登录是否记住密码\n      phoneNumber:null\n    }\n  },\n  methods: {\n    // 用户名登录\n    loginByName() {\n      if (this.Verification == null) {\n        ElMessage.error(\"请输入验证码\");\n        return;\n      }\n      if (this.Verification !== this.code) {\n        ElMessage.error(\"验证码错误，请重新输入\");\n        this.Verification = null;\n        this.generateCode();\n        return;\n      }\n      if (this.username != null && this.password != null) {\n        let rem = this.remember.toString();\n        request.login(this.username, this.password, rem).then(resp => {\n          if (resp.data.code === 200) {\n            let token = this.getCookieValue(this.username + 'token');\n            // 将token存入到store\n            store.commit('getToken', token);\n            // 获取当前用户信息\n            let user = JSON.stringify(resp.data.user);\n            sessionStorage.setItem(\"user\", user);\n            this.$router.push('/home');\n          } else {\n            ElMessage.error(resp.data.message);\n          }\n        })\n      } else {\n        ElMessage.error(\"用户名或密码不能为空\");\n      }\n    },\n    // 短信验证码登录\n    loginByPhone(){\n\n    }\n    ,\n    // 获取cookie\n    getCookieValue(cookie) {\n      //  按冒号分割cookie;\n      let cookies = document.cookie.split(\";\");\n      for (let i = 0; i < cookies.length; i++) {\n        let strings = cookies[i].trim().split(\"=\");\n        if (strings[0] === cookie) {\n          return strings[1];\n        }\n      }\n    },\n    // 生成验证码\n    generateCode() {\n      const canvas = this.$refs.canvas;\n      const context = canvas.getContext('2d');\n      const width = canvas.width;\n      const height = canvas.height;\n      // 生成随机验证码\n      const code = this.generateRandomCode();\n      this.code = code;\n      // 绘制验证码\n      context.clearRect(0, 0, width, height);\n\n      // 随机生成彩色字体\n      let colors = [\"#FF0000\", \"#00FF00\", \"#0000FF\", \"#FFA500\", \"#800080\"];\n      let randomColor = colors[Math.floor(Math.random() * colors.length)];\n      context.font = '60px Arial';\n      context.fillStyle = randomColor;\n      context.fillText(code, 90, 120);\n\n// 添加干扰线\n      for (let i = 0; i < 5; i++) {\n        // 随机位置和颜色\n        let x1 = Math.random() * width;\n        let y1 = Math.random() * height;\n        let x2 = Math.random() * width;\n        let y2 = Math.random() * height;\n        let lineColor = colors[Math.floor(Math.random() * colors.length)];\n\n        // 绘制线段\n        context.beginPath();\n        context.moveTo(x1, y1);\n        context.lineTo(x2, y2);\n        context.strokeStyle = lineColor;\n        context.lineWidth = 1;\n        context.stroke();\n      }\n    },\n    generateRandomCode() {\n      // 随机生成一个四位数验证码\n      let code = '';\n      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n      for (let i = 0; i < 4; i++) {\n        const randomIndex = Math.floor(Math.random() * characters.length);\n        code += characters.charAt(randomIndex);\n      }\n      return code;\n    },\n  }\n  ,\n  mounted() {\n    this.generateCode();\n    let c1 = this.getCookieValue(\"username\");\n    let c2 = this.getCookieValue(\"password\");\n    if (c1 !== null && c2 !== null) {\n      this.username = c1;\n      this.password = c2;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login {\n  margin-top: 0;\n  padding: 0;\n  position: relative;\n  background-size: cover;\n  display: flex; /* 将div1设置为Flex容器 */\n  justify-content: center; /* 水平居中 */\n  align-items: center; /* 垂直居中 */\n}\n\n.welcome {\n  animation: rainbow 10s infinite;\n}\n\n.left-div {\n  float: left;\n  width: 50%;\n  height: 100%;\n  top: 0;\n  background-image: url('@/assets/background.jpeg');\n  margin-right: 15px; /* 调整左右两个子元素之间的间距 */\n  background-size: cover; /* 完全覆盖容器 */\n}\n\n.right-div {\n  float: right;\n  width: 50%;\n  height: 100%;\n  margin-right: 15px; /* 调整左右两个子元素之间的间距 */\n  top: 0;\n}\n\n@keyframes rainbow {\n  10% {\n    color: red\n  }\n  14% {\n    color: orange\n  }\n  28% {\n    color: yellow\n  }\n  42% {\n    color: green\n  }\n  57% {\n    color: blue\n  }\n  71% {\n    color: indigo\n  }\n  85% {\n    color: violet\n  }\n  100% {\n    color: red\n  }\n}\n\n\n#login-box {\n  width: 50%;\n  height: 370px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);\n  display: flex;\n  justify-content: space-between;\n  margin: 10%;\n  padding: 30px 20px;\n}\n\n#login-box h1 {\n  color: #fff;\n}\n\n\n.loginButton {\n  margin-top: 15px;\n  width: 100%;\n  height: 30px;\n  font-size: 20px;\n  font-weight: 700;\n  color: #fff;\n  background-image: linear-gradient(to right, #74ebd5 0%, #9face6 100%);\n  border: 0;\n  border-radius: 15px;\n}\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}