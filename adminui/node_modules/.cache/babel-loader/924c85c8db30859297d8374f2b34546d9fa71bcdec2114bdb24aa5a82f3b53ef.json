{"ast":null,"code":"import request from \"@/util/requestUtil\";\nimport { ElMessage } from \"element-plus\";\nexport default {\n  name: 'LogSet',\n  data() {\n    return {\n      LogData: null,\n      total: null,\n      keyword: '',\n      offset: 1,\n      pageSize: 10,\n      options: [{\n        value: '用户登录',\n        label: '用户登录'\n      }, {\n        value: '退出登录',\n        label: '退出登录'\n      }]\n    };\n  },\n  methods: {\n    // 初始化日期数据\n    initLogData(keyword, offset, pageSize) {\n      request.initLogData(keyword, offset, pageSize).then(resp => {\n        if (resp) {\n          this.LogData = resp.data.operationData;\n          this.total = resp.data.total;\n        }\n      });\n    },\n    // 每页展示条数改变\n    handleSizeChange(size) {\n      this.initLogData(this.keyword, this.offset, size);\n    },\n    handleCurrentChange(offset) {\n      this.initLogData(this.keyword, offset, this.pageSize);\n    },\n    // 清空日志\n    deleteLog() {\n      request.deleteLog().then(resp => {\n        if (resp.data.code === 200) {\n          ElMessage.success(resp.data.message);\n          this.initLogData(this.keyword, this.offset, this.pageSize);\n        } else {\n          ElMessage.error(resp.data.message);\n        }\n      });\n    }\n  },\n  mounted() {\n    this.initLogData(this.keyword, this.offset, this.pageSize);\n  },\n  watch: {\n    keyword(newValue, oldValue) {\n      this.initLogData(newValue, this.offset, this.pageSize);\n    }\n  }\n};","map":{"version":3,"names":["request","ElMessage","name","data","LogData","total","keyword","offset","pageSize","options","value","label","methods","initLogData","then","resp","operationData","handleSizeChange","size","handleCurrentChange","deleteLog","code","success","message","error","mounted","watch","newValue","oldValue"],"sources":["/Users/pt/Documents/code/adminflowui/src/components/log/LogSet.vue"],"sourcesContent":["<template>\n  <div style=\"margin-top: 20px\">\n    <el-row :gutter=\"5\">\n      <el-col :span=\"8\">\n        <el-select\n            v-model=\"keyword\"\n            :clearable=\"true\"\n            placeholder=\"操作类型\"\n            style=\"width: 240px\"\n        >\n          <el-option\n              v-for=\"item in options\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n          />\n        </el-select>\n      </el-col>\n      <el-col :span=\"3\">\n        <el-button type=\"primary\" @click=\"initLogData(this.keyword,this.offset,this.pageSize)\">刷新日志</el-button>\n      </el-col>\n      <el-col :span=\"3\">\n      <el-button type=\"danger\" @click=\"deleteLog\">清空日志</el-button>\n      </el-col>\n    </el-row>\n  </div>\n  <div style=\"margin-top: 20px\">\n    <el-table :data=\"LogData\" style=\"width: 90%\" border>\n      <el-table-column prop=\"id\" label=\"id\" align=\"center\" width=\"100\" />\n      <el-table-column prop=\"user\" label=\"用户名\" align=\"center\" width=\"100\" />\n      <el-table-column prop=\"type\" label=\"操作类型\" align=\"center\" width=\"200\" />\n      <el-table-column prop=\"operation\" label=\"说明\" align=\"center\" width=\"250\" />\n      <el-table-column prop=\"date\" label=\"操作时间\" align=\"center\" width=\"250\"/>\n    </el-table>\n  </div>\n  <div style=\"margin-top: 20px\">\n    <el-pagination\n        :page-sizes=\"[10, 20, 30, 40]\"\n        :small=\"small\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=total\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n    />\n  </div>\n</template>\n<script>\nimport request from \"@/util/requestUtil\";\nimport {ElMessage} from \"element-plus\";\n\nexport default {\n  name:'LogSet',\n  data(){\n    return{\n      LogData:null,\n      total:null,\n      keyword:'',\n      offset:1,\n      pageSize:10,\n      options:[\n        {\n          value: '用户登录',\n          label: '用户登录',\n        },\n        {\n          value: '退出登录',\n          label: '退出登录',\n        }]\n    }\n  },\n  methods:{\n    // 初始化日期数据\n    initLogData(keyword,offset,pageSize){\n      request.initLogData(keyword,offset,pageSize).then(resp=>{\n        if(resp){\n          this.LogData=resp.data.operationData;\n          this.total=resp.data.total;\n        }\n      })\n    },\n    // 每页展示条数改变\n    handleSizeChange(size){\n      this.initLogData(this.keyword,this.offset,size);\n    },\n    handleCurrentChange(offset){\n      this.initLogData(this.keyword,offset,this.pageSize);\n    },\n    // 清空日志\n    deleteLog(){\n      request.deleteLog().then(resp=>{\n        if(resp.data.code===200){\n          ElMessage.success(resp.data.message);\n          this.initLogData(this.keyword,this.offset,this.pageSize);\n        }else {\n          ElMessage.error(resp.data.message)\n        }\n      })\n    }\n  },\n  mounted() {\n    this.initLogData(this.keyword,this.offset,this.pageSize);\n  },\n  watch:{\n    keyword(newValue,oldValue){\n        this.initLogData(newValue,this.offset,this.pageSize);\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"AA+CA,OAAOA,OAAM,MAAO,oBAAoB;AACxC,SAAQC,SAAS,QAAO,cAAc;AAEtC,eAAe;EACbC,IAAI,EAAC,QAAQ;EACbC,IAAIA,CAAA,EAAE;IACJ,OAAM;MACJC,OAAO,EAAC,IAAI;MACZC,KAAK,EAAC,IAAI;MACVC,OAAO,EAAC,EAAE;MACVC,MAAM,EAAC,CAAC;MACRC,QAAQ,EAAC,EAAE;MACXC,OAAO,EAAC,CACN;QACEC,KAAK,EAAE,MAAM;QACbC,KAAK,EAAE;MACT,CAAC,EACD;QACED,KAAK,EAAE,MAAM;QACbC,KAAK,EAAE;MACT,CAAC;IACL;EACF,CAAC;EACDC,OAAO,EAAC;IACN;IACAC,WAAWA,CAACP,OAAO,EAACC,MAAM,EAACC,QAAQ,EAAC;MAClCR,OAAO,CAACa,WAAW,CAACP,OAAO,EAACC,MAAM,EAACC,QAAQ,CAAC,CAACM,IAAI,CAACC,IAAI,IAAE;QACtD,IAAGA,IAAI,EAAC;UACN,IAAI,CAACX,OAAO,GAACW,IAAI,CAACZ,IAAI,CAACa,aAAa;UACpC,IAAI,CAACX,KAAK,GAACU,IAAI,CAACZ,IAAI,CAACE,KAAK;QAC5B;MACF,CAAC;IACH,CAAC;IACD;IACAY,gBAAgBA,CAACC,IAAI,EAAC;MACpB,IAAI,CAACL,WAAW,CAAC,IAAI,CAACP,OAAO,EAAC,IAAI,CAACC,MAAM,EAACW,IAAI,CAAC;IACjD,CAAC;IACDC,mBAAmBA,CAACZ,MAAM,EAAC;MACzB,IAAI,CAACM,WAAW,CAAC,IAAI,CAACP,OAAO,EAACC,MAAM,EAAC,IAAI,CAACC,QAAQ,CAAC;IACrD,CAAC;IACD;IACAY,SAASA,CAAA,EAAE;MACTpB,OAAO,CAACoB,SAAS,CAAC,CAAC,CAACN,IAAI,CAACC,IAAI,IAAE;QAC7B,IAAGA,IAAI,CAACZ,IAAI,CAACkB,IAAI,KAAG,GAAG,EAAC;UACtBpB,SAAS,CAACqB,OAAO,CAACP,IAAI,CAACZ,IAAI,CAACoB,OAAO,CAAC;UACpC,IAAI,CAACV,WAAW,CAAC,IAAI,CAACP,OAAO,EAAC,IAAI,CAACC,MAAM,EAAC,IAAI,CAACC,QAAQ,CAAC;QAC1D,CAAC,MAAK;UACJP,SAAS,CAACuB,KAAK,CAACT,IAAI,CAACZ,IAAI,CAACoB,OAAO;QACnC;MACF,CAAC;IACH;EACF,CAAC;EACDE,OAAOA,CAAA,EAAG;IACR,IAAI,CAACZ,WAAW,CAAC,IAAI,CAACP,OAAO,EAAC,IAAI,CAACC,MAAM,EAAC,IAAI,CAACC,QAAQ,CAAC;EAC1D,CAAC;EACDkB,KAAK,EAAC;IACJpB,OAAOA,CAACqB,QAAQ,EAACC,QAAQ,EAAC;MACtB,IAAI,CAACf,WAAW,CAACc,QAAQ,EAAC,IAAI,CAACpB,MAAM,EAAC,IAAI,CAACC,QAAQ,CAAC;IACxD;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}